name: $(Date:yyyyMMdd)$(Rev:.r)
resources:
  repositories:
    - repository: self
      type: git
      name: RaceTrac Portfolio/mobile-taf
      ref: master
      trigger:
        - master

pool:
  name: default

stages:
  - stage: Test Android compiliance
    jobs:
      - job: Test
        steps:
          - task: Maven@3
              inputs:
                mavenPomFile: 'pom.xml'
                goals: 'clean compile -Dtest.config=android'
                publishJUnitResults: false
                testResultsFiles: '**/surefire-reports/TEST-*.xml'
                javaHomeOption: 'JDKVersion'
                mavenVersionOption: 'Default'
                mavenAuthenticateFeed: false
                effectivePomSkip: false
                sonarQubeRunAnalysis: false
  - stage: Test IOS compiliance
      jobs:
          - job: Test
            steps:
              - task: Maven@3
                  inputs:
                    mavenPomFile: 'pom.xml'
                    goals: 'clean compile -Dtest.config=ios'
                    publishJUnitResults: false
                    testResultsFiles: '**/surefire-reports/TEST-*.xml'
                    javaHomeOption: 'JDKVersion'
                    mavenVersionOption: 'Default'
                    mavenAuthenticateFeed: false
                    effectivePomSkip: false
                    sonarQubeRunAnalysis: false
